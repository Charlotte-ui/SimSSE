<div class="container">
  <h1 mat-dialog-title>
    {{ title }}
    <button
      *ngIf="getIcon(element)"
      mat-mini-fab
      [style.background]="getColor(element)"
      disabled
    >
      <mat-icon [fontIcon]="getIcon(element)"></mat-icon>
    </button>
  </h1>

  <mat-dialog-content [formGroup]="form">
    <ng-container *ngFor="let champ of champs">
      <div *ngIf="!isHidden(champ)" mat-dialog-content>
        <mat-form-field appearance="fill" *ngIf="getType(champ) != 'boolean'">
          <mat-label>{{ getLabel(champ) }}</mat-label>

          <input
            *ngIf="getType(champ) == 'text' || getType(champ) == 'number'"
            matInput
            [formControlName]="champ"
            [formControl]="getFormControl(champ)"
            [type]="getType(champ)"
          />

          <mat-select
            *ngIf="getType(champ) == 'liste'"
            [formControlName]="champ"
          >
            <mat-option *ngFor="let elem of liste" [value]="getValue(elem)">
              {{ getName(elem) }}
              <mat-icon
                *ngIf="element['type'] == 'link'"
                [fontIcon]="getIcon(elem)"
              ></mat-icon>
            </mat-option>
          </mat-select>
        </mat-form-field>
        
        <mat-error *ngIf="getFormControl(champ).hasError('required')">
          {{ getLabel(champ) }} est <strong>requis</strong>
        </mat-error>

        <div *ngIf="getType(champ) == 'boolean'" class="noOverflow">
          <mat-label>Effet</mat-label>
          <mat-radio-group
            formControlName="start"
            aria-label="Select an option"
          >
            <mat-radio-button [value]="true">Start</mat-radio-button>
            <mat-radio-button [value]="false">Stop</mat-radio-button>
          </mat-radio-group>
        </div>
      </div>
    </ng-container>

    <div mat-dialog-actions>
      <button mat-button (click)="onNoClick()">Annuler</button>
      <button mat-button (click)="save()">Enregistrer</button>
      <button *ngIf="data[2]" mat-button (click)="delete()">Supprimer</button>
    </div>
  </mat-dialog-content>
</div>
